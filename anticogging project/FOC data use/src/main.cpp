#include <Arduino.h>
#include <board_vesc_6.h>
#include <SimpleFOC.h>
//#include "STM32_CAN.h"
#include "communication.h"
#include "debug.h"


//STM32_CAN Can( CAN1, DEF );  //Use PA11/12 pins for CAN1.
//STM32_CAN Can( CAN1, ALT );  //Use PB8/9 pins for CAN1.
//STM32_CAN Can( CAN1, ALT_2 );  //Use PD0/1 pins for CAN1.
//STM32_CAN Can( CAN2, DEF );  //Use PB12/13 pins for CAN2.
//STM32_CAN Can( CAN2, ALT );  //Use PB5/6 pins for CAN2
//STM32_CAN Can( CAN3, DEF );  //Use PA8/15 pins for CAN3.
//STM32_CAN Can( CAN3, ALT );  //Use PB3/4 pins for CAN3

const int motorPolePairs = 14;


HardwareSerial Serial6(USART6);
Debug debug(&Serial6, DEBUG_WARNING);

Controller controller(&debug);

BLDCMotor motor = BLDCMotor(motorPolePairs);
BLDCDriver6PWM driver(H1, L1, H2, L2, H3, L3, EN_GATE);
InlineCurrentSense current_sense = InlineCurrentSense(0.005f, 20.0f, CURRENT_1, CURRENT_2, CURRENT_3);

MagneticSensorSPI sensorAlpha = MagneticSensorSPI(AS5048_SPI, SPI1_NSS);
MagneticSensorSPI sensorBeta = MagneticSensorSPI(AS5048_SPI, SPI1_NSS_2);

float target_current = 0.0;
unsigned long lastCommand = 0;

// instantiate the commander
Commander command = Commander(debug);
void doTarget(char* cmd) {
  command.scalar(&target_current, cmd);
  lastCommand = millis();
}





void setup() {

  controller.addMotor(&motor);
  //controller.addSensorBeta(&sensorBeta);

  motor.phase_resistance = 0.195; // [Ohm]
  //motor.voltage_limit = 0.5; // [V] - if phase
  motor.current_limit = 6;      // [Amps] - if phase resistance defined
  motor.velocity_limit = 10; // [rad/s] 5 rad/s cca 50rpm
  driver.pwm_frequency = 20000; //default is 25000Hz

  delay(1000);
  Serial6.begin(115200);
  delay(1000);
  Serial6.println("Motor ready!");
  motor.useMonitoring(debug);
  motor.monitor_downsample = 3000;
  //motor.monitor_variables = _MON_ANGLE | _MON_VEL | _MON_CURR_Q | _MON_CURR_D| _MON_TARGET;
  motor.monitor_port = &Serial6;
  // initialise magnetic sensors hardware
  sensorAlpha.init();
  // link the motor to the sensorAlpha
  motor.linkSensor(&sensorAlpha);

  // driver config
  // power supply voltage [V]
  driver.voltage_power_supply = 24;
  driver.init();
  // link driver
  motor.linkDriver(&driver);
  // link current sense and the driver
  current_sense.linkDriver(&driver);

  // current sense init hardware
  current_sense.init();
  // link the current sense to the motor
  motor.linkCurrentSense(&current_sense);

  // aligning voltage 
  motor.voltage_sensor_align = 0.9;
  // set motion control loop to be used 
  motor.controller = MotionControlType::torque;
  motor.torque_controller = TorqueControlType::foc_current;
  motor.PID_current_q.P = 0.01;
  motor.PID_current_q.I = 1;
  motor.PID_current_d.P = 0.01; 
  motor.PID_current_d.I = 0.1;
  motor.LPF_current_q.Tf = 0.001f; // 1ms default
  motor.LPF_current_d.Tf = 0.001f; // 1ms default
  motor.LPF_velocity.Tf = 0.02f; 
  motor.LPF_angle.Tf = 0.001f; //These two "preimplemented" filters does not seem to work (I tried them at Tf very long), so we use the LowPassFilter class instead.
  // But it seems to have a difference in the implementation, as the preimplemented filters may affect the Torque loop as well.

  // setting the limits
  //  maximal velocity of the position control
  motor.velocity_limit = 20; // rad/s - default 20


  // default voltage_power_supply
  motor.voltage_limit = 3;

  // initialize motor
  motor.init();
  // align sensorAlpha and start FOC
  motor.initFOC();

  // add target command T
  command.add('T', doTarget, "target voltage");


}

// angle set point variable
float position = 0.0;
int state = 0;
float timemark = millis();
float Serialtimemark = millis();
int counter = 0;

//lookup table
const float Cogging[6284] = {
0, 0, 0, 0, 0, 0, 44.97, 37.76, 33.19, 33.21, 34.74, 36.9, 37.6, 36.98, 37.26, 36.78, 34.7, 30.91, 24.86, 16.73, 9.8, 6.18, 0.42, -5.75, -13.16, -20.34, -29.57, -45.13, -60.96, -76.77, -93.59, -108.83, -122.46, -132.09, -137.49, -143.17, -147.36, -150.19, -149.44, -147.76, -140.64, -132.44, -125.18, -116.35, -104.82, -96.92, -86.79, -80.0, -74.31, -67.52, -61.85, -57.57, -54.11, -50.97, -49.83, -48.45, -49.31, -53.0, -57.3, -61.4, -68.51, -76.95, -85.72, -96.58, -104.2, -112.09, -119.24, -123.85, -129.46, -131.32, -130.01, -131.7, -131.42, -129.59, -127.73, -122.95, -120.17, -117.33, -108.87, -101.16, -92.24, -81.6, -70.17, -57.45, -45.2, -34.87, -26.08, -17.22, -11.61, -6.47, -4.15, -1.97, -2.04, -1.26, -3.69, -5.56, -9.52, -13.75, -18.57, -23.18, -27.97, -34.38, -42.42, -49.7, -57.57, -63.77, -69.88, -76.42, -75.31, -77.45, -76.51, -74.22, -73.01, -69.93, -63.39, -62.94, -56.72, -52.29, -46.6, -40.57, -35.45, -32.88, -28.22, -25.69, -23.79, -21.28, -19.37, -17.86, -16.19, -16.98, -16.82, -16.38, -17.76, -17.04, -17.89, -18.61, -18.17, -17.75, -17.79, -18.42, -20.51, -19.77, -22.13, -19.21, -17.3, -14.32, -8.54, -5.03, -3.17, 1.36, 2.48, 5.17, 6.64, 5.01, 4.68, 5.64, 7.43, 8.36, 8.79, 10.75, 14.15, 16.65, 19.23, 19.69, 21.49, 22.21, 20.48, 18.44, 17.03, 16.1, 16.87, 16.24, 17.26, 21.77, 26.32, 32.05, 38.86, 42.5, 46.64, 51.81, 53.41, 54.81, 55.69, 55.16, 57.3, 59.96, 59.64, 59.34, 58.46, 58.63, 57.37, 53.1, 46.46, 39.55, 34.92, 29.93, 23.37, 16.49, 11.63, 7.61, 5.56, 2.53, -1.26, -3.44, -4.44, -5.39, -4.91, -5.68, -5.0, -1.79, 0.58, 2.31, 6.65, 10.26, 15.11, 17.67, 20.54, 23.37, 26.85, 29.01, 29.76, 29.01, 28.13, 27.64, 24.86, 19.24, 15.36, 10.33, 6.18, 0.29, -8.73, -16.08, -21.69, -30.29, -38.06, -46.46, -50.07, -53.24, -55.69, -57.02, -56.82, -55.0, -50.39, -45.67, -38.0, -29.59, -17.62, -6.5, 6.2, 19.8, 34.04, 47.27, 59.99, 71.19, 83.16, 94.68, 103.9, 109.7, 115.9, 122.77, 125.48, 127.04, 125.36, 123.94, 121.93, 117.82, 110.78, 104.26, 97.72, 92.5, 84.08, 77.88, 71.21, 66.07, 62.66, 58.33, 56.25, 57.0, 56.34, 58.39, 63.07, 65.69, 72.55, 77.99, 84.47, 93.51, 101.66, 108.12, 117.57, 124.41, 131.44, 137.27, 142.49, 145.21, 146.68, 147.87, 147.64, 144.87, 140.0, 133.6, 126.04, 118.32, 107.45, 96.96, 85.45, 74.35, 62.58, 50.57, 40.56, 30.71, 21.28, 12.16, 5.61, -0.17, -2.31, -6.41, -6.73, -7.41, -3.82, -1.49, 2.55, 8.26, 15.6, 22.54, 30.63, 35.53, 42.37, 49.12, 54.65, 58.88, 63.09, 66.01, 69.31, 71.47, 70.86, 69.11, 68.85, 66.53, 63.01, 58.96, 54.3, 49.41, 42.95, 36.08, 29.15, 24.29, 19.81, 15.14, 13.37, 12.87, 11.41, 12.38, 12.28, 13.88, 17.67, 20.3, 23.56, 27.99, 31.0, 37.77, 42.54, 45.86, 49.93, 55.49, 60.17, 63.97, 64.49, 67.31, 71.52, 74.72, 76.05, 78.54, 78.68, 79.64, 78.57, 74.65, 69.77, 63.45, 57.04, 52.41, 46.65, 41.58, 37.1, 32.53, 29.63, 25.42, 22.19, 19.34, 17.52, 14.4, 11.9, 9.76, 10.26, 10.0, 8.65, 7.79, 7.36, 7.7, 8.44, 5.88, 3.65, 2.78, 0.01, -1.79, -6.17, -10.78, -12.69, -14.51, -17.1, -18.33, -19.75, -18.07, -18.23, -18.12, -18.1, -15.74, -12.44, -8.5, -5.67, 0.54, 3.16, 7.43, 10.99, 13.74, 16.65, 19.59, 21.9, 26.22, 28.03, 28.75, 27.88, 27.0, 25.01, 20.31, 14.84, 10.4, 6.11, 2.73, -1.64, -3.83, -5.89, -6.6, -7.45, -8.12, -8.21, -8.67, -10.22, -9.84, -11.46, -10.83, -8.79, -6.71, -2.48, 0.99, 6.12, 12.06, 18.13, 21.2, 24.63, 26.21, 28.89, 27.55, 26.76, 24.05, 21.49, 17.77, 13.72, 8.33, 1.74, -5.31, -11.01, -17.87, -26.05, -33.77, -43.14, -52.68, -62.46, -73.85, -83.29, -95.98, -106.42, -113.72, -119.69, -124.0, -127.37, -129.24, -125.29, -119.87, -113.2, -104.59, -95.3, -85.99, -74.66, -66.11, -58.33, -51.86, -46.44, -41.67, -39.07, -39.71, -38.89, -41.09, -43.46, -44.39, -49.94, -53.58, -59.36, -66.14, -73.67, -83.04, -94.41, -104.6, -115.97, -125.44, -133.94, -141.58, -148.37, -150.9, -150.82, -151.29, -150.95, -145.22, -141.19, -135.07, -129.23, -122.31, -112.29, -100.62, -92.21, -79.64, -66.48, -54.94, -44.59, -34.51, -25.64, -18.22, -12.19, -8.1, -5.7, -5.36, -6.97, -10.89, -15.56, -23.03, -31.06, -39.57, -47.17, -56.73, -65.62, -75.97, -85.95, -94.11, -102.41, -110.4, -115.49, -119.91, -122.04, -119.45, -118.25, -113.25, -106.4, -98.47, -90.92, -81.45, -73.62, -65.59, -57.46, -51.71, -46.77, -39.26, -33.86, -30.08, -26.15, -25.75, -23.43, -23.49, -25.29, -28.89, -31.75, -34.75, -38.34, -43.24, -47.86, -52.34, -56.21, -62.1, -69.36, -75.67, -83.98, -90.16, -96.03, -95.01, -91.1, -90.1, -83.81, -74.7, -66.47, -58.98, -56.36, -55.24, -50.13, -51.23, -51.82, -50.91, -48.92, -46.39, -41.62, -36.6, -30.74, -24.96, -19.3, -14.68, -11.84, -12.46, -13.47, -13.74, -14.99, -18.76, -20.01, -20.3, -18.72, -16.13, -11.67, -6.79, 1.79, 5.44, 10.48, 14.66, 15.19, 14.54, 11.3, 7.01, 3.68, -1.13, -3.64, -2.43, -2.0, 0.6, 1.44, 3.81, 5.52, 5.29, 4.34, 3.5, 3.27, 3.85, 4.61, 4.54, 5.3, 5.53, 6.56, 6.46, 5.54, 4.98, 4.49, 4.81, 5.36, 5.2, 5.98, 7.94, 8.43, 11.9, 12.55, 13.13, 15.13, 15.69, 15.31, 16.47, 14.2, 13.18, 13.04, 9.19, 6.36, 4.4, -0.97, -4.43, -9.65, -15.63, -19.87, -25.39, -32.45, -34.26, -38.37, -41.29, -41.96, -43.06, -40.78, -37.43, -35.6, -32.71, -26.99, -21.77, -12.58, -5.53, 3.49, 13.71, 24.81, 36.42, 47.29, 57.07, 67.71, 77.75, 84.82, 91.45, 95.69, 99.2, 101.44, 102.02, 101.92, 100.58, 98.56, 96.24, 94.2, 90.18, 85.14, 79.29, 74.51, 70.74, 66.26, 61.99, 57.54, 56.96, 56.03, 56.72, 57.52, 60.44, 62.92, 68.99, 74.1, 81.72, 88.12, 96.5, 103.18, 110.8, 117.88, 125.76, 129.0, 133.48, 136.55, 139.52, 142.03, 141.36, 139.51, 138.72, 135.33, 130.18, 122.93, 110.74, 100.0, 86.76, 71.26, 57.49, 44.14, 30.72, 20.06, 11.49, 1.64, -2.78, -8.27, -12.56, -16.94, -18.64, -21.13, -19.07, -18.95, -15.86, -10.43, -0.61, 9.99, 20.43, 30.48, 42.99, 54.51, 64.66, 72.91, 80.08, 87.08, 93.6, 96.98, 101.02, 101.77, 101.31, 100.16, 96.12, 91.98, 88.12, 81.48, 72.47, 66.53, 58.45, 52.78, 45.78, 38.05, 32.56, 31.47, 27.92, 28.22, 28.44, 30.31, 34.36, 39.48, 45.68, 52.65, 61.49, 69.24, 77.94, 88.63, 96.55, 104.83, 115.2, 121.68, 128.49, 136.68, 141.53, 147.09, 152.16, 154.72, 157.16, 158.99, 157.85, 155.64, 151.86, 145.36, 138.26, 130.13, 121.91, 109.31, 100.15, 90.65, 81.5, 72.91, 66.58, 59.79, 57.72, 54.56, 50.78, 48.44, 47.06, 44.0, 44.45, 43.41, 43.22, 46.73, 47.7, 49.59, 53.71, 55.95, 58.23, 57.76, 57.23, 57.74, 56.2, 52.48, 49.29, 44.7, 43.19, 38.77, 34.09, 30.04, 25.92, 21.59, 18.38, 13.39, 11.35, 9.58, 7.64, 6.22, 4.61, 4.63, 4.17, 2.42, 1.28, 1.25, 1.71, 2.77, 3.0, 3.01, 3.74, 5.87, 7.16, 7.24, 6.45, 5.38, 4.58, 3.21, 1.28, 0.44, 2.65, 3.26, 4.63, 5.59, 7.65, 8.81, 7.8, 4.83, 3.66, 2.65, 2.54, 0.33, -0.77, 0.23, 1.79, 4.59, 6.25, 7.55, 9.93, 12.45, 12.56, 12.96, 11.79, 10.79, 7.64, 4.42, -0.77, -3.39, -5.48, -8.84, -10.96, -11.02, -13.37, -14.53, -17.66, -24.08, -31.05, -40.34, -50.69, -58.16, -64.53, -74.59, -79.38, -81.32, -82.3, -80.05, -77.17, -75.89, -67.85, -62.55, -56.53, -49.29, -42.38, -36.06, -30.16, -25.65, -21.96, -19.99, -19.06, -19.61, -22.51, -24.79, -30.19, -36.89, -43.16, -47.72, -55.65, -63.73, -73.69, -81.89, -90.61, -101.28, -112.27, -122.23, -129.35, -134.9, -141.23, -147.44, -147.11, -146.79, -142.01, -137.59, -130.81, -122.4, -111.93, -101.85, -93.16, -86.18, -76.37, -66.35, -56.96, -44.05, -36.8, -27.5, -19.84, -15.52, -11.07, -8.78, -10.98, -12.21, -16.84, -21.12, -26.62, -34.85, -41.74, -49.49, -59.37, -66.48, -73.66, -79.3, -87.19, -94.54, -100.53, -104.84, -109.47, -113.23, -115.87, -116.06, -115.27, -108.92, -103.75, -96.7, -88.28, -79.35, -69.77, -58.46, -50.96, -42.38, -33.51, -26.83, -21.94, -16.56, -13.75, -13.66, -13.58, -17.39, -20.67, -26.42, -33.55, -42.94, -51.44, -61.59, -69.86, -80.63, -91.46, -102.31, -111.78, -122.86, -130.27, -141.96, -151.66, -158.32, -165.87, -169.22, -167.91, -168.6, -163.08, -156.33, -148.53, -139.3, -130.97, -125.15, -116.77, -112.15, -106.53, -103.18, -97.22, -93.55, -87.47, -82.95, -76.38, -71.59, -66.57, -63.95, -61.4, -61.51, -62.78, -66.03, -69.46, -71.96, -75.08, -76.75, -78.33, -78.22, -77.46, -74.76, -73.72, -70.78, -67.79, -65.54, -62.99, -61.44, -59.25, -56.17, -54.25, -52.47, -47.63, -43.17, -37.13, -31.71, -25.75, -19.16, -14.58, -8.96, -4.19, 1.64, 4.63, 7.81, 10.67, 14.08, 14.52, 14.52, 12.49, 12.4, 11.0, 9.01, 7.73, 4.48, 3.34, 2.02, 0.57, -0.44, -1.23, -3.28, -3.06, -4.11, -3.37, -3.67, -3.68, -2.75, -0.56, -0.43, 1.62, 2.19, 3.52, 4.26, 3.61, 1.81, 1.63, -0.61, -1.41, -2.47, -2.96, -3.91, -4.56, -5.32, -5.05, -5.16, -6.32, -6.04, -4.98, -1.13, 2.65, 6.45, 9.56, 14.23, 20.34, 26.27, 30.62, 36.37, 41.5, 49.44, 55.69, 61.72, 66.57, 70.95, 75.34, 77.97, 76.91, 78.3, 76.86, 76.16, 74.74, 72.7, 71.12, 70.47, 67.36, 64.12, 61.92, 59.97, 57.21, 55.14, 53.09, 52.53, 52.32, 51.81, 53.31, 53.88, 56.93, 59.87, 64.85, 70.9, 75.93, 79.76, 85.98, 90.58, 95.18, 99.78, 102.39, 107.16, 111.7, 113.49, 115.38, 115.97, 114.26, 112.67, 107.33, 99.08, 90.9, 79.39, 69.81, 58.15, 47.53, 35.19, 24.44, 15.41, 7.25, -1.91, -7.8, -16.15, -18.67, -21.53, -23.63, -22.13, -21.27, -20.04, -15.09, -10.17, -2.17, 6.62, 15.68, 27.52, 38.66, 47.2, 57.62, 67.18, 74.47, 82.24, 88.46, 93.42, 99.56, 102.8, 103.84, 106.54, 106.79, 107.46, 103.84, 98.29, 93.26, 86.54, 78.31, 69.13, 57.55, 51.34, 46.62, 39.98, 37.0, 34.89, 33.61, 35.95, 37.9, 43.41, 49.57, 55.55, 62.01, 70.11, 78.77, 89.06, 98.54, 109.87, 121.57, 133.38, 144.42, 155.81, 165.36, 174.01, 178.39, 183.86, 187.53, 189.64, 187.75, 184.93, 177.9, 171.91, 162.65, 153.1, 145.74, 136.85, 125.62, 117.22, 108.7, 101.37, 92.26, 81.56, 72.84, 67.17, 62.51, 58.58, 54.93, 53.57, 54.06, 56.28, 60.11, 61.93, 64.35, 67.82, 72.74, 75.53, 77.99, 81.45, 84.58, 89.36, 92.2, 93.03, 96.22, 98.44, 95.89, 93.09, 90.03, 86.2, 81.88, 71.74, 62.6, 54.28, 47.5, 38.09, 30.34, 22.52, 17.21, 11.59, 6.91, 1.82, -1.53, -5.23, -6.09, -6.46, -7.42, -7.08, -6.06, -4.83, -2.96, -2.02, -0.11, 3.77, 7.35, 9.29, 11.6, 13.68, 15.8, 17.79, 18.33, 18.2, 20.01, 20.33, 21.06, 20.62, 18.98, 16.97, 14.57, 10.53, 8.85, 4.76, 1.73, 1.74, 0.8, 1.84, 1.54, 1.64, 3.15, 4.94, 3.79, 5.71, 3.06, 4.07, 3.86, 2.99, 1.72, 2.08, 1.26, 1.94, 2.45, 1.51, 4.24, 3.07, 1.85, -1.5, -3.7, -7.93, -9.79, -14.55, -15.62, -17.46, -21.64, -24.57, -26.37, -28.74, -32.93, -34.85, -34.81, -31.11, -29.11, -26.93, -24.84, -21.19, -18.77, -19.24, -19.8, -20.83, -19.88, -21.43, -21.84, -26.16, -26.26, -28.42, -30.14, -35.58, -38.99, -43.54, -49.45, -59.18, -67.98, -76.18, -82.41, -90.24, -98.08, -103.66, -109.7, -114.9, -115.48, -121.55, -124.62, -123.74, -124.82, -123.01, -117.62, -118.0, -108.91, -101.89, -96.57, -84.18, -73.67, -64.96, -52.62, -44.74, -35.93, -30.14, -25.69, -21.11, -18.71, -18.12, -18.34, -17.91, -18.75, -22.06, -26.3, -28.65, -32.8, -39.12, -47.79, -54.72, -66.25, -74.23, -81.36, -88.78, -94.3, -97.65, -101.97, -99.09, -100.13, -98.41, -94.29, -89.16, -85.23, -77.91, -69.31, -61.44, -55.43, -50.18, -41.71, -32.87, -25.47, -19.75, -12.63, -8.39, -2.83, -1.35, -3.59, -6.05, -11.85, -17.16, -24.67, -34.56, -46.82, -54.97, -66.08, -77.42, -91.85, -103.1, -117.35, -129.54, -144.03, -158.58, -167.87, -175.39, -185.39, -188.75, -193.34, -195.56, -191.62, -191.2, -186.47, -181.23, -178.14, -169.81, -161.65, -154.94, -148.25, -142.06, -133.47, -124.18, -115.63, -109.13, -103.72, -97.35, -94.46, -91.38, -90.45, -92.35, -90.95, -92.62, -95.58, -95.67, -98.15, -99.86, -101.13, -104.85, -104.99, -106.86, -108.28, -110.38, -111.58, -111.85, -111.11, -114.02, -110.19, -106.2, -102.6, -95.68, -86.9, -79.59, -66.73, -56.65, -48.48, -37.31, -28.17, -20.08, -9.17, -1.21, 5.19, 12.99, 19.85, 24.6, 28.36, 29.54, 31.15, 31.09, 29.23, 27.65, 24.73, 19.83, 16.01, 10.87, 5.99, 2.94, -0.91, -4.51, -5.13, -8.97, -10.44, -12.08, -14.78, -17.08, -17.12, -18.06, -13.43, -12.73, -8.98, -5.21, -3.57, 0.25, 3.52, 4.96, 6.65, 8.35, 7.93, 11.64, 12.24, 11.9, 12.89, 14.19, 15.89, 15.74, 13.72, 12.63, 9.93, 5.22, 2.61, -1.25, -2.55, -4.57, -3.68, -2.27, 0.28, 3.95, 1.84, 4.85, 7.61, 7.77, 10.28, 11.15, 10.73, 14.73, 14.45, 17.7, 18.29, 18.69, 24.64, 26.57, 27.25, 28.41, 26.46, 25.21, 26.23, 18.09, 14.58, 15.02, 14.76, 14.99, 17.31, 16.35, 20.54, 22.94, 24.27, 27.15, 30.62, 33.26, 37.02, 39.91, 44.67, 50.59, 54.03, 59.28, 63.02, 66.75, 69.49, 73.6, 73.97, 75.78, 76.63, 76.94, 76.75, 74.17, 69.32, 64.75, 60.39, 53.33, 46.23, 40.25, 34.14, 29.38, 23.55, 17.3, 11.06, 6.72, 1.67, 0.48, -2.38, -2.96, -1.33, -0.41, 1.7, 7.56, 13.16, 20.89, 29.16, 36.87, 48.3, 59.03, 66.43, 75.67, 85.02, 93.25, 100.38, 106.03, 113.14, 119.24, 121.6, 121.3, 122.11, 123.15, 123.32, 119.36, 114.29, 108.36, 103.62, 95.7, 87.62, 78.29, 72.14, 64.5, 60.22, 55.38, 53.87, 51.07, 50.69, 49.17, 50.57, 53.61, 57.64, 60.7, 68.22, 74.77, 84.91, 95.07, 104.5, 118.2, 134.17, 143.24, 153.33, 160.48, 171.04, 179.41, 181.28, 183.97, 186.81, 187.94, 187.7, 182.39, 179.37, 173.72, 163.9, 157.15, 149.87, 140.83, 130.79, 118.73, 108.79, 99.27, 90.5, 81.85, 74.31, 69.21, 64.14, 62.6, 62.33, 60.35, 60.17, 62.61, 66.24, 71.19, 76.34, 80.45, 86.14, 94.66, 103.76, 109.16, 115.02, 116.31, 120.84, 123.2, 123.18, 120.69, 119.09, 114.36, 112.98, 106.08, 100.45, 93.2, 85.29, 77.08, 67.92, 55.92, 46.55, 39.26, 31.34, 22.81, 15.2, 10.39, 6.07, 2.43, -2.52, -5.29, -7.61, -8.3, -9.75, -6.59, -3.11, -1.81, 1.83, 6.61, 10.6, 16.13, 17.54, 18.29, 22.89, 24.39, 25.38, 26.0, 24.87, 24.67, 24.65, 20.98, 17.94, 15.85, 12.93, 11.25, 7.6, 2.3, -1.07, -4.53, -9.83, -13.56, -17.3, -19.4, -20.47, -20.47, -20.73, -19.9, -16.65, -14.99, -12.89, -8.8, -6.06, -2.5, -0.34, 0.52, 5.24, 9.81, 12.41, 15.27, 15.63, 18.51, 20.16, 18.66, 19.23, 19.37, 16.94, 16.4, 13.77, 14.98, 15.62, 10.85, 10.26, 10.18, 8.23, 9.19, 5.44, 3.87, 4.77, 1.3, -0.06, 0.79, 0.9, 0.92, -0.48, -1.17, 0.2, -1.47, -4.08, -7.17, -9.6, -11.39, -14.08, -19.95, -24.01, -26.73, -32.19, -34.55, -37.4, -40.51, -38.16, -40.62, -46.51, -47.52, -52.68, -56.57, -59.36, -65.75, -66.72, -63.55, -64.02, -61.06, -56.5, -52.69, -47.81, -41.04, -36.71, -30.08, -24.87, -20.93, -16.17, -10.52, -7.52, -3.58, -0.47, 0.63, 1.14, 1.91, 0.43, -1.74, -5.03, -8.38, -12.17, -19.67, -25.73, -34.47, -43.32, -50.72, -57.69, -64.7, -69.08, -74.09, -77.58, -79.85, -80.39, -80.33, -79.19, -77.69, -76.66, -70.33, -63.43, -59.29, -55.14, -49.46, -43.87, -38.06, -35.48, -32.81, -28.76, -25.75, -24.19, -23.71, -25.42, -27.57, -31.02, -36.91, -44.92, -53.75, -63.32, -74.13, -86.31, -98.64, -109.98, -122.54, -136.89, -151.74, -166.63, -178.84, -190.76, -203.65, -212.65, -218.68, -224.6, -225.69, -227.99, -227.78, -221.99, -219.55, -213.63, -203.27, -193.29, -181.57, -171.21, -164.41, -154.04, -144.83, -138.86, -132.91, -126.72, -121.51, -117.19, -113.37, -111.82, -109.73, -105.5, -105.51, -106.78, -109.62, -110.83, -112.0, -111.38, -117.94, -123.81, -128.47, -127.52, -131.71, -132.68, -136.65, -134.79, -131.29, -126.52, -122.1, -115.15, -105.2, -96.66, -87.17, -75.28, -58.65, -48.06, -34.19, -24.97, -10.36, 1.68, 12.72, 18.49, 27.74, 33.54, 38.5, 40.91, 41.44, 40.92, 39.23, 37.02, 32.82, 28.9, 23.37, 20.36, 15.63, 11.88, 6.02, 3.9, -1.36, -5.3, -10.1, -14.96, -19.75, -20.63, -22.74, -22.24, -22.1, -20.49, -16.12, -13.27, -10.08, -5.99, -0.73, 4.31, 9.05, 14.19, 20.28, 22.24, 23.49, 21.66, 22.5, 21.46, 19.51, 16.07, 17.47, 16.72, 15.58, 11.67, 7.69, 0.81, -4.48, -13.02, -18.59, -22.62, -25.55, -28.88, -28.36, -28.78, -28.61, -28.73, -28.93, -31.24, -30.72, -31.92, -33.09, -32.41, -30.72, -29.15, -24.62, -20.94, -18.07, -10.9, -8.36, -6.01, -4.99, -4.77, -4.21, -1.56, -2.9, -0.2, 0.84, 4.95, 7.12, 7.71, 8.24, 7.97, 6.0, 5.01, 5.28, 5.15, 5.6, 6.37, 11.07, 14.07, 17.14, 17.04, 20.06, 25.42, 26.19, 27.29, 30.52, 31.8, 33.66, 35.68, 37.89, 37.16, 34.67, 32.77, 30.38, 28.58, 26.2, 19.22, 21.47, 19.32, 16.34, 13.91, 13.89, 12.29, 12.04, 9.59, 9.33, 10.84, 13.28, 13.45, 17.28, 21.34, 24.06, 29.83, 35.35, 43.34, 50.0, 54.66, 60.81, 68.29, 73.57, 79.84, 82.93, 86.54, 87.92, 88.32, 85.38, 83.9, 79.78, 75.85, 72.33, 67.94, 62.0, 58.98, 57.36, 52.47, 46.31, 41.8, 37.95, 36.12, 32.95, 28.22, 27.07, 29.94, 31.35, 34.36, 38.15, 44.45, 51.24, 59.59, 68.0, 76.48, 86.29, 98.42, 109.66, 119.73, 130.2, 139.43, 148.03, 156.88, 161.73, 165.75, 167.81, 168.81, 168.01, 166.55, 165.1, 159.73, 153.49, 147.87, 140.36, 133.07, 125.75, 115.58, 110.63, 102.37, 97.75, 93.72, 89.15, 85.13, 83.13, 80.76, 84.94, 84.91, 88.09, 90.08, 96.78, 102.7, 109.19, 114.89, 123.25, 127.96, 137.02, 143.48, 148.37, 154.16, 156.38, 158.49, 161.22, 161.63, 158.51, 157.56, 150.24, 143.04, 134.32, 124.7, 114.0, 103.02, 90.58, 78.43, 69.36, 57.33, 47.59, 37.55, 27.8, 19.41, 12.8, 5.66, -1.61, -6.27, -9.43, -9.59, -10.2, -8.21, -6.16, 0.5, 4.35, 8.89, 12.63, 16.55, 19.81, 24.04, 25.73, 26.34, 26.99, 27.07, 26.75, 24.78, 21.43, 17.11, 11.88, 4.33, -3.4, -11.69, -17.47, -25.54, -34.45, -41.19, -46.37, -51.02, -54.7, -57.57, -59.79, -56.59, -53.88, -50.33, -44.49, -37.57, -31.8, -24.93, -17.54, -9.73, 0.69, 6.88, 14.54, 21.29, 30.06, 37.13, 44.54, 48.17, 53.63, 57.27, 64.84, 63.78, 62.92, 61.69, 60.11, 59.84, 57.99, 52.73, 53.36, 50.88, 48.44, 46.77, 43.69, 39.91, 36.11, 32.43, 30.19, 27.12, 23.63, 21.03, 20.02, 19.21, 20.56, 21.7, 21.48, 23.27, 23.18, 20.53, 24.48, 19.28, 19.15, 19.96, 18.66, 18.59, 19.74, 14.47, 16.54, 13.91, 12.39, 10.68, 8.52, 8.03, 6.11, 5.29, 4.14, 1.5, -1.49, -1.72, -2.94, -3.33, -4.06, -3.84, -1.62, 2.08, 4.14, 5.88, 8.84, 10.36, 10.93, 8.98, 7.28, 4.71, 5.12, 1.66, 1.15, 0.59, -0.82, -5.16, -7.75, -14.71, -20.72, -27.98, -33.83, -37.47, -37.5, -40.37, -44.04, -46.11, -46.07, -46.41, -47.83, -49.78, -51.81, -49.73, -47.39, -47.13, -45.91, -43.13, -39.27, -34.34, -33.78, -30.05, -27.95, -25.9, -26.11, -26.54, -27.24, -27.77, -33.07, -38.22, -44.96, -50.15, -60.95, -73.61, -83.3, -92.1, -104.14, -113.88, -125.35, -133.55, -141.74, -150.75, -159.19, -162.86, -170.06, -172.7, -174.27, -174.73, -174.39, -170.06, -166.87, -159.28, -153.61, -147.98, -139.08, -131.86, -125.1, -117.96, -112.53, -106.52, -100.83, -96.22, -90.57, -89.0, -87.65, -86.81, -87.02, -86.02, -86.34, -88.07, -89.66, -92.8, -97.64, -105.08, -113.14, -122.33, -130.14, -134.73, -136.63, -139.99, -139.65, -139.59, -136.9, -130.53, -124.39, -116.55, -105.18, -94.53, -84.22, -70.27, -60.93, -49.61, -41.24, -28.78, -18.3, -8.94, -1.9, 7.75, 12.52, 18.83, 20.09, 21.37, 24.36, 23.27, 20.2, 17.05, 9.77, 4.25, -3.44, -11.2, -16.59, -23.29, -29.4, -32.8, -39.92, -42.64, -47.56, -52.66, -56.68, -56.22, -57.0, -55.36, -53.21, -50.79, -44.96, -37.55, -33.78, -25.34, -17.48, -12.13, -4.5, 0.61, 5.37, 10.62, 13.24, 13.7, 15.94, 17.41, 16.21, 13.69, 10.44, 3.05, -4.25, -10.84, -19.26, -27.11, -35.23, -43.98, -49.49, -53.87, -61.42, -66.52, -70.12, -71.0, -76.69, -78.52, -79.03, -78.61, -77.0, -75.53, -73.33, -66.42, -64.06, -58.08, -50.33, -44.67, -37.89, -33.4, -28.4, -21.05, -16.84, -15.26, -13.64, -13.1, -11.07, -11.6, -11.69, -14.45, -16.91, -17.09, -20.27, -25.08, -26.99, -32.37, -35.4, -36.79, -38.44, -39.42, -38.22, -38.77, -36.5, -35.88, -34.27, -33.07, -31.65, -29.91, -25.74, -20.89, -15.93, -13.1, -10.89, -7.69, -5.47, -4.52, -6.69, -5.4, -3.74, -1.78, -0.04, 1.92, 2.08, 4.08, 4.49, 4.94, 4.6, 4.76, 3.96, 3.74, 5.51, 6.0, 6.84, 8.02, 10.94, 13.48, 16.66, 17.66, 20.62, 23.16, 26.29, 26.93, 28.06, 31.91, 33.78, 32.87, 33.01, 30.73, 30.0, 26.89, 23.17, 19.67, 18.51, 14.5, 12.88, 10.99, 10.28, 8.7, 8.23, 6.29, 7.44, 7.73, 8.72, 10.92, 14.56, 17.89, 22.86, 29.74, 36.17, 41.4, 47.9, 52.82, 62.03, 69.55, 74.65, 82.36, 92.72, 100.03, 107.18, 112.94, 120.31, 126.66, 129.02, 129.17, 129.75, 130.75, 127.97, 123.44, 116.73, 114.33, 109.24, 105.46, 100.61, 95.35, 92.26, 89.58, 83.53, 80.66, 78.08, 75.48, 75.46, 75.7, 78.36, 82.57, 85.34, 89.3, 93.57, 99.56, 103.65, 109.63, 114.1, 122.46, 128.87, 134.44, 137.41, 139.35, 141.05, 138.55, 135.92, 132.23, 127.28, 120.76, 115.2, 104.83, 98.83, 85.73, 74.76, 60.88, 51.01, 38.83, 29.0, 17.76, 8.25, -2.42, -9.31, -18.05, -23.97, -29.11, -31.75, -31.85, -29.74, -24.15, -20.22, -15.99, -10.85, -3.42, 5.4, 9.91, 15.1, 20.66, 26.51, 28.33, 32.01, 32.08, 34.4, 31.94, 30.77, 28.4, 27.65, 21.7, 13.52, 5.67, -0.24, -8.03, -15.87, -23.57, -31.81, -35.49, -39.17, -43.08, -45.84, -46.83, -46.88, -42.84, -37.77, -32.76, -26.03, -16.77, -8.25, 2.63, 13.85, 25.42, 38.27, 50.31, 61.74, 74.55, 86.43, 97.05, 107.12, 111.87, 124.62, 131.43, 133.48, 133.92, 132.9, 129.43, 128.75, 117.66, 111.97, 107.3, 101.99, 94.47, 88.22, 83.37, 77.05, 71.78, 69.21, 65.26, 62.92, 59.53, 56.56, 56.67, 54.61, 51.93, 53.79, 56.67, 59.26, 62.5, 60.62, 63.4, 62.35, 63.72, 64.26, 65.62, 65.25, 70.28, 70.19, 74.54, 72.67, 69.07, 67.91, 64.51, 60.24, 55.39, 47.61, 42.8, 36.82, 29.84, 24.33, 20.09, 14.34, 10.54, 6.76, 4.79, 2.79, 0.58, -2.59, -1.01, -1.81, -1.71, -1.56, -2.52, 0.24, 2.4, 2.89, 6.43, 7.15, 9.49, 10.57, 8.34, 8.41, 5.47, 4.81, 4.82, 2.36, 1.27, 2.51, 0.97, 1.96, 0.16, -1.27, -1.05, -1.18, -2.11, -2.87, -3.54, -4.55, -5.85, -6.39, -6.8, -6.74, -5.45, -4.62, -3.45, -1.56, -0.53, -1.22, -4.64, -9.09, -12.12, -15.5, -19.8, -26.55, -31.45, -36.24, -40.09, -48.2, -56.15, -63.96, -70.91, -75.67, -77.35, -85.71, -84.48, -86.39, -87.61, -86.72, -86.13, -87.57, -83.12, -83.62, -81.93, -76.57, -73.42, -71.34, -67.4, -64.16, -61.39, -55.32, -55.02, -50.2, -48.73, -47.72, -46.86, -45.64, -45.49, -46.37, -49.03, -53.34, -59.16, -63.53, -69.58, -78.22, -81.72, -91.78, -98.07, -103.6, -109.7, -115.38, -120.71, -125.97, -125.07, -122.56, -121.19, -116.9, -112.1, -102.91, -93.9, -85.83, -75.1, -64.45, -52.98, -41.93, -31.6, -23.92, -16.47, -11.73, -5.81, -2.15, 1.67, 2.26, 3.51, 3.78, 3.0, 1.32, -2.61, -6.13, -8.58, -13.14, -18.77, -25.55, -32.78, -36.63, -43.64, -48.96, -52.57, -52.93, -52.49, -49.6, -51.72, -46.34, -43.61, -38.63, -33.48, -24.49, -17.6, -6.47, 3.25, 13.25, 22.27, 29.22, 34.13, 41.86, 50.84, 52.35, 52.76, 52.15, 50.76, 47.29, 39.92, 29.11, 20.19, 9.93, -0.82, -13.53, -27.27, -40.32, -53.11, -65.31, -77.02, -88.94, -96.93, -105.05, -113.71, -117.73, -123.23, -121.46, -117.78, -114.76, -109.81, -102.45, -98.06, -90.53, -86.31, -83.64, -77.17, -70.16, -61.88, -55.91, -49.0, -42.43, -37.6, -35.41, -36.23, -38.59, -40.1, -42.55, -47.06, -52.15, -58.49, -63.69, -71.14, -75.53, -80.73, -65.63, -45.86, -24.71, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
};

// Function to retrieve the cogging compensation values for a given angle in milliradians
float getCogValue(uint16_t angle) {
    return Cogging[angle];
}


void loop() {
  counter++;
  motor.loopFOC();
  motor.move(target_current);

  //read position sensor alpha
  position = sensorAlpha.getAngle();

  //convert it to 0-2PI milliradians
  position = fmod(position, 2*PI);
  if (position < 0) {
    position += 2*PI;
  }
  position = uint16_t(position*1000);

  //print the cogging value
  if (millis() - Serialtimemark > 100) {
    Serialtimemark = millis();
    Serial6.print("position:");
    Serial6.println(position);
    Serial6.println(getCogValue(position)/1000);
    Serial6.println(state);
    //Serial6.println(2*counter);
    //counter = 0;
  }
  
  //changing parameter value depending on time
  if (millis() - timemark > 5000) {
    timemark = millis();
    //state = (state + 1) % 2;
  }

  switch (state) {
    case 0:
      target_current = getCogValue(position)/1000;
      break;
    case 1:
      target_current = 0*getCogValue(position)/1000;
      break;
    default:
      // Handle unexpected cases
      break;
  }
}


